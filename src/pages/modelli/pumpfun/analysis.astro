---
import Layout from '../../../layouts/BaseLayout.astro';
---

<Layout title="Pump.Fun CryptoMarket – Analisi">
  <!-- HERO ------------------------------------------------------>
  <section class="relative isolate overflow-hidden py-28 bg-gradient-to-tr from-rose-600 via-fuchsia-500 to-indigo-600 text-white">
    <div class="absolute inset-0 -z-10 opacity-25 blur-lg [mask-image:radial-gradient(white,transparent)]">
      <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" fill="currentColor">
        <circle cx="400" cy="300" r="300" />
      </svg>
    </div>
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-5xl font-black tracking-tight drop-shadow-lg">Pump.Fun CryptoMarket</h1>
      <p class="text-s font-black tracking-tight drop-shadow-lg text-primary-600 mt-3">*Lavoro di ricerca in collaborazione con <a href="https://orcid.org/0009-0000-6204-9940" target="_blank" rel="noopener noreferrer" >G. Marino</a>
      </p>
      <p class="mt-4 max-w-xl mx-auto text-xl/relaxed font-black tracking-tight drop-shadow-lg">
        Analisi quantitativa e visual storytelling sui meccanismi di mercato di Pump.Fun e sulle performance dei token comunitari.
      </p>
      <div class="mt-8 flex flex-wrap justify-center gap-6">
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4">
          <p class="text-3xl font-bold" id="counter-coins">208851</p>
          <p class="text-sm font-black tracking-tight drop-shadow-lg">Token analizzati</p>
        </div>
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4">
          <p class="text-3xl font-bold" id="counter-grad">0.76%</p>
          <p class="text-sm font-black tracking-tight drop-shadow-lg">Tasso di graduation</p>
        </div>
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4">
          <p class="text-3xl font-bold" id="counter-week">7</p>
          <p class="text-sm font-black tracking-tight drop-shadow-lg">Giorni di dataset</p>
        </div>
      </div>
    </div>
  </section>

  <!-- INTRODUZIONE --------------------------------------------->
  <section class="py-24 bg-gray-50 dark:bg-gray-900/50 dark:text-gray-50">
    <div class="container mx-auto px-4 lg:px-8 max-w-8xl grid gap-16">
      <article class="prose text-[24px] lg:prose-lg dark:prose-invert mx-auto">
        <h1 class="text-5xl md-5">Introduzione generale</h1>
        <div>
          Il mercato <em>pump.fun</em> presenta due fasi distinte – <strong>virtuale</strong> e
          <strong>reale</strong> – separate da una soglia di liquidità. All'origine ogni nuovo token
          parte con 30 SOL virtuali e <code>1 073 000 191</code> token in circolazione. Finché la
          liquidità reale non oltrepassa circa 115 SOL, il prezzo segue la
          <a href="#bonding-curve">bonding curve</a> <span class="whitespace-nowrap">\(x·y=k\)</span>.
          Raggiunta la soglia, la curva viene "laureata" e confluisce in una pool AMM reale,
          mantenendo inalterato il prezzo al momento della transizione.
        </div>
      </article>

      <div class="container px-4 max-w-8xl">
        <div class="flex flex-col md:flex-row items-center gap-8">
          <!-- Colonna Testo -->
          <div class="md:w-1/3">
            <h2 class="text-3xl font-extrabold mb-4">Token Graduation</h2>
            <p class="text-lg mb-6">
              Andamento delle riserve <em>SOL</em> e <em>Token</em>, della liquidità <em>Kappa</em> e del <em>Prezzo</em> per un particolare token graduato nella piattaforma.<br class="hidden md:block mb-5"/>
              Cambio repentino della liquidità e continuità nei prezzi nei prezzi della transizione di <em>"fase"</em> tra virtual e Bonding Curve.
            </p>
            <a href="/img/pumpfun/grad_token.png" target="_blank"
              class="inline-block px-5 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
              Ingrandisci
            </a>
          </div>

          <!-- Colonna Immagine -->
          <div class="md:w-2/3">
            <img
              src={"/img/pumpfun/grad_token.png"}
              alt="Descrizione immagine"
              class="w-full h-full rounded-lg shadow-lg object-cover"
            />
          </div>
        </div>
      </div>

      <div class="container px-4 max-w-8xl">
        <div class="flex flex-col md:flex-row items-center gap-8">
          <div class="md:w-2/3">
            <img
              src={"/img/pumpfun/grad_time_histogram.png"}
              alt="Descrizione immagine"
              class="w-full h-full rounded-lg shadow-lg object-cover"
            />
          </div>

          <div class="md:w-1/3">
            <h2 class="text-3xl font-extrabold mb-4">Tempo di Graduation</h2>
            <p class="text-lg mb-6">
              Frequenza di gradution dopo un certo intervallo di tempo
            </p>
            <a href="/img/pumpfun/grad_time_histogram.png" target="_blank"
              class="inline-block px-5 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
              Ingrandisci
            </a>
          </div>
          
        </div>
      </div>

      <div class="container px-4 max-w-8xl">
        <div class="flex flex-col md:flex-row items-center gap-8">
          <!-- Colonna Testo -->
          <div class="md:w-1/3">
            <h2 class="text-3xl font-extrabold mb-4">Probabilità di Graduation</h2>
            <p class="text-lg mb-6">
              Andamento di come evolve la probabilità di graduation in funzione della quantità di SOL presenti nella riserva della Bonding Curve o pool virtuale.
            </p>
            <a href="/img/pumpfun/prob_grad.png" target="_blank"
              class="inline-block px-5 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
              Ingrandisci
            </a>
          </div>

          <!-- Colonna Immagine -->
          <div class="md:w-2/3">
            <img
              src={"/img/pumpfun/prob_grad.png"}
              alt="Descrizione immagine"
              class="w-full h-full rounded-lg shadow-lg object-cover"
            />
          </div>
        </div>
      </div>

      <!-- GRAFICO BONDING CURVE --------------------------------->
      <div id="bonding-curve" class="mx-auto max-w-3xl">
        <canvas id="curveChart" class="w-full h-72"></canvas>
        <p class="mt-4 text-center text-sm text-gray-500 dark:text-gray-400">
          Figura 1 – Bonding curve (<code>y = k / (x+30)</code>)
        </p>
      </div>

    </div>
  </section>

  <!-- PROBABILITÀ DI GRADUATION -------------------------------->
  <section class="py-24 relative bg-white dark:bg-gray-950">
    <div class="absolute inset-x-0 top-0 h-1/2 bg-gradient-to-b from-emerald-100/60 to-transparent dark:from-emerald-800/40 -z-10" />
    <div class="container mx-auto px-4 lg:px-8 max-w-6xl grid lg:grid-cols-2 gap-16 items-center">
      <div>
        <h2 class="text-3xl font-extrabold mb-4">Quanto è probabile che un token si laurei?</h2>
        <p class="mb-8 text-lg leading-relaxed dark:text-gray-300">
          Nei dati di una settimana osserviamo <strong>208 851</strong> nuovi token, di cui solo
          <strong>1 581</strong> hanno superato la soglia, corrispondente a un tasso di graduation di
          appena <strong>0,7 %</strong>. Il grafico interattivo mostra come la probabilità di successo
          cresca con i SOL raccolti.
        </p>
        <div class="flex flex-col gap-4">
          <label for="solInput" class="font-medium">SOL attuali:</label>
          <input type="range" id="solInput" min="0" max="120" value="50" class="w-full accent-emerald-600" />
          <p class="text-center text-xl font-semibold">
            Probabilità graduazione: <span id="probOutput">0 %</span>
          </p>
        </div>
      </div>
      <div>
        <canvas id="probChart" class="w-full h-80" />
      </div>
    </div>
  </section>

  <!-- STRATEGIA DI YIELD --------------------------------------->
  <section class="py-4 bg-gray-50 dark:bg-gray-900/50 dark:text-gray-50">
    <div class="container mx-auto px-4 lg:px-8 max-w-6xl text-center">
      <h2 class="text-3xl font-extrabold mb-6">Chi sono i trader?</h2>
      <p class="mx-auto max-w-3xl text-lg mb-12 dark:text-gray-300">
        Il <strong>18 %</strong> dei <em>first trader</em> sono bot, percentuale che sale al
        <strong>56 %</strong> fra i trader presenti al momento della graduation. In media, i primi
        trader realizzano un <strong>+7 %</strong> di yield in sole 5 transazioni.
      </p>
      <div class="grid sm:grid-cols-3 gap-8">
        <div class="bg-emerald-600/10 dark:bg-emerald-500/10 rounded-2xl p-6">
          <p class="text-4xl font-black" id="botFirst">0 %</p>
          <p class="mt-2 text-sm">First trader bot</p>
        </div>
        <div class="bg-fuchsia-600/10 dark:bg-fuchsia-500/10 rounded-2xl p-6">
          <p class="text-4xl font-black" id="botGrad">0 %</p>
          <p class="mt-2 text-sm">Grad trader bot</p>
        </div>
        <div class="bg-amber-600/10 dark:bg-amber-500/10 rounded-2xl p-6">
          <p class="text-4xl font-black" id="avgYield">0 %</p>
          <p class="mt-2 text-sm">Yield medio first trader</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CALL TO ACTION ------------------------------------------>
  <section class="py-20 bg-gradient-to-br from-indigo-600 via-sky-600 to-emerald-500 text-white text-center">
    <div class="container mx-auto px-4 max-w-4xl">
      <h2 class="text-4xl font-black mb-4">Esplora i dati in tempo reale</h2>
      <p class="text-lg mb-8">Collegati con wallet per visualizzare i token live, simulare trade e
        salvare dashboard personalizzate.</p>
      <a href="/dashboard" class="inline-block px-8 py-4 bg-white/10 rounded-full backdrop-blur hover:bg-white/20 transition font-semibold">Apri Dashboard</a>
    </div>
  </section>

<!-- script: usa client:load per esecuzione lato browser -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" client:load>
  //import Chart from 'chart.js/auto';           // assicurati di aver fatto:  npm i chart.js

  // ATTENDI DOM (<client:load> lo garantisce già)
  const ctx = document.getElementById('curveChart');
  if (!ctx) { console.error('Canvas non trovato'); }

  /* serie fittizia di esempio */
  const labels = Array.from({ length: 85 }, (_, i) => i);
  const data   = labels.map(x => (30 * 1_073_000_191) / (30 + x) - 279_900_191);
  //(x => 1_073_000_191 - (30 * 1_073_000_191) / (30 + x));

  new Chart(ctx, {
    type : 'line',
    data : {
      labels,
      datasets: [{
        label: 'Token residui',
        data,
        borderColor     : '#4f46e5',
        backgroundColor : 'rgba(99,102,241,0.15)',
        borderWidth     : 2,
        tension         : 0.25,
        pointRadius     : 0,
        fill            : true,
      }],
    },
    options: { plugins: { legend: { display: false } } },
  });
</script>


</Layout>
