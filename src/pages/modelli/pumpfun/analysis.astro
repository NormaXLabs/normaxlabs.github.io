---
import Layout from '../../../layouts/BaseLayout.astro';
---

<Layout title="Pump.Fun CryptoMarket – Analisi">
  <!-- HERO ------------------------------------------------------>
  <section class="relative isolate overflow-hidden py-28 bg-gradient-to-tr from-rose-600 via-fuchsia-500 to-indigo-600 text-white">
    <div class="absolute inset-0 -z-10 opacity-25 blur-lg [mask-image:radial-gradient(white,transparent)]">
      <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" fill="currentColor">
        <circle cx="400" cy="300" r="300" />
      </svg>
    </div>
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-5xl font-black tracking-tight drop-shadow-lg">Pump.Fun CryptoMarket</h1>
      <p class="text-s font-black tracking-tight drop-shadow-lg text-primary-600 mt-3">*Lavoro di ricerca in collaborazione con <a href="https://orcid.org/0009-0000-6204-9940" target="_blank" rel="noopener noreferrer" >G. Marino</a>
      </p>
      <p class="mt-4 max-w-xl mx-auto text-xl/relaxed font-black tracking-tight drop-shadow-lg">
        Analisi quantitativa e visual storytelling sui meccanismi di mercato di Pump.Fun e sulle performance dei token comunitari.
      </p>
      <div class="mt-8 flex flex-wrap justify-center gap-6">
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4">
          <p class="text-3xl font-bold" id="counter-coins">208851</p>
          <p class="text-sm font-black tracking-tight drop-shadow-lg">Token analizzati</p>
        </div>
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4">
          <p class="text-3xl font-bold" id="counter-grad">0.76%</p>
          <p class="text-sm font-black tracking-tight drop-shadow-lg">Tasso di graduation</p>
        </div>
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4">
          <p class="text-3xl font-bold" id="counter-week">7</p>
          <p class="text-sm font-black tracking-tight drop-shadow-lg">Giorni di dataset</p>
        </div>
      </div>
    </div>
  </section>

  <!-- INTRODUZIONE --------------------------------------------->
  <section class="py-24 bg-white-50 dark:bg-white-900/50 dark:text-white-50">
    <div class="container mx-auto px-4 lg:px-8 max-w-8xl grid gap-16">
      <article class="prose text-[24px] lg:prose-lg dark:prose-invert mx-auto">
        <h1 class="text-5xl md-5">Introduzione generale</h1>
        <div>
          
        </div>
      </article>

      <div class="container px-4 max-w-8xl">
        <div class="flex flex-col md:flex-row items-center gap-8">
          
          

          <div class="md:w-2/3">
            <!-- GRAFICO BONDING CURVE --------------------------------->
            <div id="bonding-curve" class="mx-auto max-w-3xl">
              <canvas id="curveChart" class="w-full h-72"></canvas>
              <p class="mt-4 text-center text-xl text-gray-500 dark:text-gray-400">
                Figura 1<br class="hidden md:block"/>- Virtual Bonding Curve (BC) (<code>y = k / (x+30) - 279_900_191 </code>)<br class="hidden md:block"/>
                - Real BC (<code>y = k' / x </code>, <code> k' &lt k </code>)
              </p>
            </div>
          </div>


          <div class="md:w-1/3">
            <h2 class="text-3xl font-extrabold mb-4">Reserves</h2>
            <p class="text-lg mb-6">
              Il mercato <em>pump.fun</em> presenta due fasi distinte – <strong>virtuale</strong> e
              <strong>reale</strong> – separate da una soglia di liquidità. All'origine ogni nuovo token
              parte con 30 SOL virtuali e <code>1 073 000 191</code> token si cui solo il 79% sono reali e acquistabili. Finché la
              liquidità reale non oltrepassa circa 115 SOL, il prezzo segue la
              <a href="#bonding-curve">bonding curve</a> <span class="whitespace-nowrap">x·y = k</span>.
              Raggiunta la soglia, la curva viene "laureata" e confluisce in una pool AMM reale,
              mantenendo inalterato il prezzo al momento della transizione.
            </p>
            
          </div>



        </div>
      </div>

      <div class="container px-4 max-w-8xl">
        <div class="flex flex-col md:flex-row items-center gap-8">
          <!-- Colonna Testo -->
          <div class="md:w-1/2">
            <h2 class="text-3xl font-extrabold mb-4">Token Graduation</h2>
            <p class="text-lg mb-6">
              Andamento delle riserve <em>SOL</em> e <em>Token</em>, della liquidità <em>Kappa</em> e del <em>Prezzo</em> per un particolare token graduato nella piattaforma.<br class="hidden md:block mb-5"/>
              Cambio repentino della liquidità e continuità nei prezzi della transizione di <em>"fase"</em> tra virtual e Bonding Curve.
            </p>
            <a href="/img/pumpfun/grad_token_clean_interactive.html" target="_blank"
              class="inline-block px-5 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
              Ingrandisci
            </a>
            
          </div>

          <!-- Colonna Immagine -->
          <div class="md:w-1/2">
            <iframe
              src="/img/pumpfun/grad_token_clean_interactive.html"  
              class="w-[830px] h-[700px] rounded-lg shadow-lg border"
              scrolling="no"                  
              title="Grafico embedded"
            ></iframe>
          </div>



        </div>
      </div>

      <div class="container px-4 max-w-8xl">
        <div class="flex flex-col md:flex-row items-center gap-80">
          <div class="md:w-1/2">
            <iframe
              src="/img/pumpfun/grad_time_histogram_interactive.html"  
              class="w-[650px] h-[420px] rounded-lg shadow-lg border"
              scrolling="no"                  
              title="Grafico embedded"
            ></iframe>
          </div>

          <div class="md:w-1/2">
            <h2 class="text-3xl font-extrabold mb-4">Tempo di Graduation</h2>
            <p class="text-lg mb-6">
              Frequenza di gradution dopo un certo intervallo di tempo
            </p>
            <a href="/img/pumpfun/grad_time_histogram_interactive.html" target="_blank"
              class="inline-block px-5 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
              Ingrandisci
            </a>
          </div>
          
        </div>
      </div>

      <div class="container px-4 max-w-8xl">
        <div class="flex flex-col md:flex-row items-center gap-8">
          <!-- Colonna Testo -->
          <div class="md:w-1/2">
            <h2 class="text-3xl font-extrabold mb-4">Probabilità di Graduation</h2>
            <p class="text-lg mb-6">
              Nei dati di una settimana osserviamo <strong>208 851</strong> nuovi token, di cui solo
              <strong>1 581</strong> hanno superato la soglia, corrispondente a un tasso di graduation di
              appena <strong>0,7 %</strong>. Il grafico interattivo mostra come la probabilità di successo
              cresca con i SOL raccolti.
            </p>
            <a href="/img/pumpfun/prob_grad_interactive.html" target="_blank"
              class="inline-block px-5 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition">
              Ingrandisci
            </a>
          </div>

          <!-- Colonna Immagine -->
          <div class="md:w-1/2">
            <iframe
              src="/img/pumpfun/prob_grad_interactive.html"  
              class="w-[650px] h-[420px] rounded-lg shadow-lg border"
              scrolling="no"                  
              title="Grafico embedded"
            ></iframe>
          </div>
        </div>
      </div>


    </div>
  </section>

  <!-- STRATEGIA DI YIELD --------------------------------------->
  <section class="py-4 bg-gray-50 dark:bg-gray-900/50 dark:text-gray-50">
    <div class="container mx-auto px-4 lg:px-8 max-w-6xl text-center">
      <h2 class="text-3xl font-extrabold mb-6">Chi sono i trader?</h2>
      <p class="mx-auto max-w-3xl text-lg mb-12 dark:text-gray-300">
        Il <strong>18 %</strong> dei <em>primi investitori</em> sono bot, percentuale che sale al
        <strong>56 %</strong> fra i trader presenti al momento della graduation. In media, i primi
        trader realizzano un <strong>+7 %</strong> di guadagno in sole 5 transazioni.
      </p>
      <div class="grid sm:grid-cols-3 gap-8">
        <div class="bg-emerald-600/10 dark:bg-emerald-500/40 rounded-2xl p-6">
          <p class="text-4xl font-black" id="botFirst">18 %</p>
          <p class="mt-2 text-sm">Bot al Primo Trade</p>
        </div>
        <div class="bg-fuchsia-600/10 dark:bg-fuchsia-500/40 rounded-2xl p-6">
          <p class="text-4xl font-black" id="botGrad">56 %</p>
          <p class="mt-2 text-sm">Bot al Grad. Trade</p>
        </div>
        <div class="bg-amber-600/10 dark:bg-amber-500/40 rounded-2xl p-6">
          <p class="text-4xl font-black" id="avgYield">7 %</p>
          <p class="mt-2 text-sm">Guadagno medio del primo trader</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CALL TO ACTION ------------------------------------------>
  <section class="py-20 bg-gradient-to-br from-indigo-600 via-sky-600 to-emerald-500 text-white text-center">
    <div class="container mx-auto px-4 max-w-4xl">
      <h2 class="text-4xl font-black mb-4">Esplora i dati in tempo reale</h2>
      <p class="text-lg mb-8">Collegati per visualizzare i token live e osservare tutte le transazioni<br class="hidden md:block"/>nella blockchain di Solana, utilizzando i programId di Pump.fun.</p>
      <a href="https://solscan.io/" target="_blank" class="inline-block px-8 py-4 bg-white/10 rounded-full backdrop-blur hover:bg-white/20 transition font-semibold">Apri Dashboard</a>
    </div>
  </section>

<!-- script: usa client:load per esecuzione lato browser -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" client:load>
  //import Chart from 'chart.js/auto';           // assicurati di aver fatto:  npm i chart.js

  // ATTENDI DOM (<client:load> lo garantisce già)
  const ctx = document.getElementById('curveChart');
  if (!ctx) { console.error('Canvas non trovato'); }

  /* serie fittizia di esempio */
  const labels = Array.from({ length: 85 }, (_, i) => i);
  const data   = labels.map(x => (30 * 1_073_000_191) / (30 + x) - 279_900_191);
  //(x => 1_073_000_191 - (30 * 1_073_000_191) / (30 + x));

  const labels1 = Array.from({ length: 85 }, (_, i) => i);
  const data1   = labels1.map(x => (85 * 206_900_000) / x);
  new Chart(ctx, {
    type : 'line',
    data : {
      labels,
      datasets: [{
        label: 'Virtual',
        data,
        borderColor     : 'red',
        backgroundColor : 'orange',
        borderWidth     : 2,
        tension         : 0.25,
        pointRadius     : 0,
        fill            : true,
      },
      {
        label: 'Real',
        data: data1,
        borderColor     : '#4f46e5',
        backgroundColor : 'rgba(99,102,241,0.15)',
        borderWidth     : 2,
        tension         : 0.25,
        pointRadius     : 0,
        fill            : true,
      }],
    },
    options: { plugins: { legend: { position: 'bottom' , labels: {font: {size: 26}}} },
          scales: {
            x: { title: { display: true, text: 'SOL in BC', font: {
            size: 26  } }, ticks: { font: {size: 18}, maxTicksLimit: 8, stepSize: 100} },
            y: {  max: 8e8,  title: { display: true, text: 'Token in BC', font: { size: 26  } }, ticks: { font: {size: 18}, stepSize: 4e8, autoSkip: true, maxTicksLimit: 6, callback: value => {
              if (value === 0) return '0';
              const [m, e] = value.toExponential().split('e');
              const mant = parseFloat(m).toFixed(0);
              const exp  = e.replace('+','');
              return `${mant}e${exp}`;
            }} }
          },
          animation: { duration: 500 } },
  });
</script>

</Layout>
